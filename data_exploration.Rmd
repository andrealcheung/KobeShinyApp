---
title: "Data_exploration"
author: "Robert Saldivar"
date: "February 12, 2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

The purpose of this document is to explore the data and to see how it might look before putting it into the shiny app. This is also a good place to wrangle data.

```{r}
#Loading the packages and will be used to wrangle the data


library(tidyverse)
library(here)
library(ballr)
library(lubridate)

kobe <- read_csv("data.csv")

```


```{r}
#Renaming the shots made flag so that the written as made or missed

kobe_wrangle <- kobe %>%
  mutate(shot_made = ifelse(shot_made_flag  > 0, "scored", "missed")) 

```



```{r}
#This is going to visualize the graph of shots taken

shot_graph <- ggplot(kobe_wrangle, aes(x = lon, y = lat)) +
  geom_point(aes(color = shot_made))

shot_graph
```

Shots made per game
```{r}

kobeshots <- kobe  %>% 
  drop_na() %>% 
  group_by(game_id) %>% 
  summarize(
    sum(shot_made_flag)
  )
```

Points per game
```{r}

kobepoints <- read_csv("kobepoints.csv") %>% 
  mutate(
  yr_mo_day = lubridate::parse_date_time(game_date,"mdy"),
  yr_mo_day = as.Date(yr_mo_day), 
  ) %>% 
rename("date" = yr_mo_day) %>% 
  group_by(opponent, date) %>% 
  summarize(
    game_score = sum(game_score)
  )

write_csv(kobepoints, "kobepoints2.csv") #write the csv 
```

